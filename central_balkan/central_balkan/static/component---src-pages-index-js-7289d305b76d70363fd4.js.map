{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./src/components/layout.js"],"names":["IndexPage","state","categories","products","currentCategory","onCurrentCategoryChange","_this","setState","componentDidMount","_this2","this","axios","get","then","res","data","render","_this3","currentProducts","foundCategories","filter","el","id","currentCategoryName","length","name","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_3__","map","product","React","Component","useStyles","makeStyles","theme","root","display","appBar","zIndex","drawer","height","toolbar","paddingTop","width","flexShrink","content","flexGrow","padding","spacing","Layout","_ref","children","classes","console","log","className","_material_ui_core_CssBaseline__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_3__","position","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_Drawer__WEBPACK_IMPORTED_MODULE_6__","open","variant","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_7__","category","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_8__","button","onClick","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_9__","key","primary","products_count"],"mappings":"sJAKA,IAEMA,8JACJC,MAAQ,CACNC,WAAY,GACZC,SAAU,GACVC,gBAAiB,QAWnBC,wBAA0B,SAAAD,GAAe,OACvCE,EAAKC,SAAS,CAAEH,yIATlBI,kBAAA,WAAoB,IAAAC,EAAAC,KAClBC,IAAMC,IAVE,0CAUOC,KAAK,SAAAC,GAClBL,EAAKF,SAAS,CACZL,WAAYY,EAAIC,KAAKb,WACrBC,SAAUW,EAAIC,KAAKZ,gBAOzBa,OAAA,WAAS,IAAAC,EAAAP,KACDQ,EAAkBR,KAAKT,MAAMG,gBAC/BM,KAAKT,MAAME,SAASO,KAAKT,MAAMG,iBAC/B,GAEEe,EAAkBT,KAAKT,MAAMC,WAAWkB,OAC5C,SAAAC,GAAE,OAAIA,EAAGC,KAAOL,EAAKhB,MAAMG,kBAEvBmB,EACJJ,EAAgBK,OAAS,EACrBL,EAAgB,GAAGM,KACnB,yBAEN,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACE3B,WAAYQ,KAAKT,MAAMC,WACvBG,wBAAyBK,KAAKL,yBAE9BqB,EAAAC,EAAAC,cAAA,UAAKL,GACJL,EAAgBY,IAAI,SAAAC,GAAO,OAC1BL,EAAAC,EAAAC,cAAA,sBAAcG,EAAQN,aAtCRO,IAAMC,WA6CfjC,gJC9BTkC,UAAYC,YAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,QAAS,QAEXC,OAAQ,CACNC,OAAQJ,EAAMI,OAAOC,OAAS,EAC9BC,OAAQ,SAEVC,QAAS,CACPC,WAAY,QACZC,MAAO,SAETJ,OAAQ,CACNI,MAAO,QACPC,WAAY,GAEdC,QAAS,CACPC,SAAU,EACVC,QAASb,EAAMc,QAAQ,QA8CZC,IA1CA,SAAAC,GAAuD,IAApDlD,EAAoDkD,EAApDlD,WAAYG,EAAwC+C,EAAxC/C,wBAAyBgD,EAAeD,EAAfC,SAC/CC,EAAUpB,IAGhB,OAFAqB,QAAQC,IAAI,eAAgBtD,GAG1BwB,EAAAC,EAAAC,cAAA,OAAK6B,UAAWH,EAAQjB,MACtBX,EAAAC,EAAAC,cAAC8B,EAAA,EAAD,MACAhC,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAQC,SAAS,QAAQH,UAAWH,EAAQf,QAC1Cb,EAAAC,EAAAC,cAACiC,EAAA,EAAD,+BAEFnC,EAAAC,EAAAC,cAACkC,EAAA,EAAD,CAAQL,UAAWH,EAAQb,OAAQsB,MAAM,EAAMC,QAAQ,aACrDtC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK6B,UAAWH,EAAQX,UAExBjB,EAAAC,EAAAC,cAACqC,EAAA,EAAD,KACG/D,EAAW4B,IAAI,SAAAoC,GAAQ,OACtBxC,EAAAC,EAAAC,cAACuC,EAAA,EAAD,CACEC,QAAM,EACNC,QAAS,kBAAMhE,EAAwB6D,EAAS5C,MAEhDI,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CACEC,IAAKL,EAAS5C,GACdkD,QAAYN,EAASzC,KAAd,KAAuByC,EAASO,eAAhC,YAOnB/C,EAAAC,EAAAC,cAAA,QAAM6B,UAAWH,EAAQP,SACvBrB,EAAAC,EAAAC,cAAA,OAAK6B,UAAWH,EAAQX,UACvBU,GAEH3B,EAAAC,EAAAC,cAAA","file":"component---src-pages-index-js-7289d305b76d70363fd4.js","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n\nimport Layout from \"../components/layout\";\n\nconst url = \"http://centralbalkan.com/api/products/\";\n\nclass IndexPage extends React.Component {\n  state = {\n    categories: [],\n    products: {},\n    currentCategory: null\n  };\n\n  componentDidMount() {\n    axios.get(url).then(res => {\n      this.setState({\n        categories: res.data.categories,\n        products: res.data.products\n      });\n    });\n  }\n  onCurrentCategoryChange = currentCategory =>\n    this.setState({ currentCategory });\n\n  render() {\n    const currentProducts = this.state.currentCategory\n      ? this.state.products[this.state.currentCategory]\n      : [];\n\n    const foundCategories = this.state.categories.filter(\n      el => el.id === this.state.currentCategory\n    );\n    const currentCategoryName =\n      foundCategories.length > 0\n        ? foundCategories[0].name\n        : \"Няма избрана категория\";\n\n    return (\n      <Layout\n        categories={this.state.categories}\n        onCurrentCategoryChange={this.onCurrentCategoryChange}\n      >\n        <h1>{currentCategoryName}</h1>\n        {currentProducts.map(product => (\n          <div>Продукт {product.name}</div>\n        ))}\n      </Layout>\n    );\n  }\n}\n\nexport default IndexPage;\n","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nimport \"./layout.css\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    height: \"100px\"\n  },\n  toolbar: {\n    paddingTop: \"100px\",\n    width: \"350px\"\n  },\n  drawer: {\n    width: \"350px\",\n    flexShrink: 0\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3)\n  }\n}));\n\nconst Layout = ({ categories, onCurrentCategoryChange, children }) => {\n  const classes = useStyles();\n  console.log(\"categories: \", categories);\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>Централен Балкан ЕООД</Toolbar>\n      </AppBar>\n      <Drawer className={classes.drawer} open={true} variant=\"permanent\">\n        <div>\n          <div className={classes.toolbar} />\n\n          <List>\n            {categories.map(category => (\n              <ListItem\n                button\n                onClick={() => onCurrentCategoryChange(category.id)}\n              >\n                <ListItemText\n                  key={category.id}\n                  primary={`${category.name} (${category.products_count})`}\n                />\n              </ListItem>\n            ))}\n          </List>\n        </div>\n      </Drawer>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n      <footer></footer>\n    </div>\n  );\n};\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default Layout;\n"],"sourceRoot":""}